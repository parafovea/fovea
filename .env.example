# Environment configuration for fovea Docker Compose deployment
# Copy this file to .env and update values as needed

# Database Configuration
POSTGRES_USER=fovea
POSTGRES_PASSWORD=fovea_password
POSTGRES_DB=fovea
DATABASE_URL=postgresql://fovea:fovea_password@postgres:5432/fovea

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379

# Backend Configuration
NODE_ENV=production
MODEL_SERVICE_URL=http://model-service:8000
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318

# Frontend Configuration
VITE_API_URL=http://backend:3001
VITE_MODEL_SERVICE_URL=http://model-service:8000

# Model Service Configuration
TRANSFORMERS_CACHE=/models
MODEL_CONFIG_PATH=/config/models.yaml
CUDA_VISIBLE_DEVICES=0,1,2,3  # Adjust based on available GPUs
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512

# Grafana Configuration
GF_SECURITY_ADMIN_PASSWORD=admin
GF_USERS_ALLOW_SIGN_UP=false

# Video Storage Configuration
# Choose storage backend: local, s3, or hybrid
VIDEO_STORAGE_TYPE=local
VIDEO_STORAGE_PATH=/data
VIDEO_BASE_URL=/api/videos

# S3 Configuration (when VIDEO_STORAGE_TYPE=s3 or hybrid)
# Uncomment and configure when using S3 storage
# S3_BUCKET=fovea-demo-videos
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your-access-key-id
# S3_SECRET_ACCESS_KEY=your-secret-access-key
# S3_ENDPOINT=                          # Optional: for S3-compatible services (MinIO, DigitalOcean Spaces, etc.)
# S3_PUBLIC_BUCKET=false                # Set to true if bucket allows public reads (not recommended)

# CDN Configuration (optional)
# Enable CDN for improved video delivery performance
# CDN_ENABLED=false
# CDN_BASE_URL=https://cdn.fovea.video
# CDN_SIGNED_URLS=true                  # Use signed URLs for CDN access

# Thumbnail Storage (can differ from video storage)
# Thumbnails can be stored separately from videos for better performance
THUMBNAIL_STORAGE_TYPE=local
THUMBNAIL_PATH=/data/thumbnails
# THUMBNAIL_S3_PREFIX=thumbnails/       # S3 key prefix when using S3 storage

# Port Configuration (host ports)
FRONTEND_PORT=3000
BACKEND_PORT=3001
MODEL_SERVICE_PORT=8000
POSTGRES_PORT=5432
REDIS_PORT=6379
PROMETHEUS_PORT=9090
GRAFANA_PORT=3002
OTEL_GRPC_PORT=4317
OTEL_HTTP_PORT=4318
